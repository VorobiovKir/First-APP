{% extends 'note/main_local.html' %}
{% load bootstrap3 %}
{% load mptt_tags %}

{% block categories %}


{#    <select name="category" id="id_category">#}
{#    <option value="" selected="selected">---------</option>#}
{#    {% for item in categories %}#}
{#        {% ifequal item.parent_id None %}#}
{#            <optgroup label="{{ item.name }}">#}
{#                <option value="{{ item.id }}">{{ item.name }}</option>#}
{#                {% for subitem in categories %}#}
{#                    {% ifequal subitem.parent_id item.id %}#}
{#                       <option value="{{ subitem.id }}">{{ subitem.name }}</option>#}
{#                    {% endifequal %}#}
{#                {% endfor %}#}
{#            </optgroup>#}
{#        {% endifequal %}#}
{#    {% endfor %}#}
{#    </select>#}



    <form action="{% url 'note:addCat' %}" method="POST" class="form login_form">
        {% csrf_token %}

        {% bootstrap_form form_category %}

        {% buttons %}
            <button type="submit" class="btn btn-primary">
                {% bootstrap_icon "star" %} Submit
            </button>
        {% endbuttons %}

    </form>
    <hr>
    <form action="{% url 'note:delCat' 0 %}" method="POST">
        {% csrf_token %}
        {% buttons %}
            <button type="submit" class="btn btn-primary">
                {% bootstrap_icon "star" %} Submit
            </button>
        {% endbuttons %}
        <table class="table">
            {% for category in categories %}
                <tr>
                    <td><input type="checkbox" name="remove_cat" value="{{ category.id }}"></td>
                    <td>{{ category }}</td>
                    <td>{{ category.get_descendant_count }}</td>
                    <td>{{ category.parent }}</td>
                    <td>{{ category.notes_set.all|length }}</td>
                    <td><a href="{% url 'note:delCat' category.id %}" onclick="return confirm('Do you want to delete?');"><span class="glyphicon glyphicon-remove"></span></a></td>
                </tr>
            {% endfor %}
        </table>
    </form>



{% endblock %}